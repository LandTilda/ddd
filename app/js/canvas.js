function initSetup(){if(0==$selector.length)return!1;$($selector).each(function(e){$shapes[e]={shape:"../img/canvas.png",colorMapping:"white",color:"#ffffff",backgroundColor:"transparent",colorAlpha:"original",density:7,densityOriginal:7,maxParticleSize:3,maxParticleSizeOriginal:3},$(this).remove()})}var $shapes=[],$selector=".canvas-header .shape";initSetup();var Nodes={canvasID:null,drawDistance:28,maxLineThickness:4,reactionSensitivity:3,lineThickness:1,points:[],mouse:{x:2*window.innerWidth,y:2*window.innerHeight,down:!1},animation:null,randomMovement:!1,impulsX:600*Math.random()-300,impulsY:300*-Math.random(),imgsToDraw:$shapes,timeoutHolder:null,totalImgCount:0,loaded:!1,loadedCount:0,canvas:null,context:null,imageInput:null,bgImage:[],onMobile:!1,explodeChance:!0,currentShapeIndex:0,currentSequenceIndex:0,prevShapeIndex:0,sequenceActive:!1,decMultiplier:.02,bgCanvas:null,bgContext:null,bgContextPixelData:null,disableExplosion:"off",rotateTimer:parseInt("5000"),regularAnimation:!0,textPosition:"bottom",textPositionH:"center",fps:43,fpsDec:.13,now:0,then:Date.now(),elapsed:0,init:function(e){this.canvas=$(e)[0],this.context=canvas.getContext("2d"),this.context.globalCompositeOperation="lighter",this.canvas.width=$(e).closest(".canvas-header").length>0?window.innerWidth:$(e).closest(".canvas-bg").width(),this.canvas.height=$(e).closest(".canvas-header").length>0?window.innerHeight:$(e).closest(".canvas-bg").height(),this.canvas.style.display="block",this.canvasID=e,Nodes.canvasBgColor(),this.canvas.width<=690&&(this.onMobile=!0),Nodes.rotateTimer=5500,$(e).parents(".canvas-header").length>0?$("body").on("mousemove",function(e){1==Nodes.regularAnimation&&(Nodes.mouse.x=e.clientX,Nodes.mouse.y=e.clientY)}):($(e).parents(".canvas-bg").on("mousemove",function(e){Nodes.mouse.x=e.clientX-$(this).offset().left,Nodes.mouse.y=e.clientY-$(this).offset().top+$(window).scrollTop()}),$(e).parents(".canvas-bg").on("mouseout",function(){Nodes.mouse.x=1e3,Nodes.mouse.y=-1e3,Nodes.mouse.down=!1})),window.onresize=function(i){if(void 0!==i.isTrigger)return!1;Nodes.canvas.width=$(e).parents(".canvas-header").length>0?window.innerWidth:$(e).parents(".canvas-bg").width(),Nodes.canvas.height=$(e).parents(".canvas-header").length>0?window.innerHeight:$(e).parents(".canvas-bg").height(),Nodes.onWindowResize()};for(var i=0,t=0;t<Nodes.imgsToDraw.length;t++)if("object"==typeof Nodes.imgsToDraw[t].shape)for(i=0;i<Nodes.imgsToDraw[t].shape.length;i++)this.totalImgCount++;else this.totalImgCount++;for(var i=0,t=0;t<Nodes.imgsToDraw.length;t++)if("object"==typeof Nodes.imgsToDraw[t].shape)for(i=0;i<Nodes.imgsToDraw[t].shape.length;i++)this.loadData(Nodes.imgsToDraw[t].shape[i],t,i,!0);else this.loadData(Nodes.imgsToDraw[t].shape,t,null,!1)},preparePoints:function(e,i,t){jQuery.isArray(this.bgImage[e])?("object"!=typeof this.points[e]&&(this.points[e]={}),this.points[e][i]=[]):this.points[e]=[];var a,s,n=this.bgContextPixelData.data;for(a=0;a<this.canvas.height;a+=this.imgsToDraw[e].density)for(s=0;s<this.canvas.width;s+=this.imgsToDraw[e].density){var o=4*(s+a*this.bgContextPixelData.width);if(!(n[o]>200&&n[o+1]>200&&n[o+2]>200||0===n[o+3])){if(0==e)var h=Math.random()>.5?Math.random()*window.innerWidth:Math.random()*-window.innerWidth,r=Math.random()>.5?Math.random()*window.innerHeight:Math.random()*-window.innerHeight,d=Math.random()*(2*window.innerWidth)+h,l=Math.random()*(2*window.innerHeight)+r;else{var g=e==this.points.length?0:e-1;if(jQuery.isArray(this.points[g])||"object"!=typeof this.points[g])var c=Math.random(),d=this.points[g][Math.floor(c*this.points[g].length)].originalX,l=this.points[g][Math.floor(c*this.points[g].length)].originalY;else var m=i==this.points[g].length?0:i-1,c=Math.random(),d=this.points[g][m][Math.floor(c*this.points[g][m].length)].originalX,l=this.points[g][m][Math.floor(c*this.points[g][m].length)].originalY}switch(1==t&&0==Nodes.randomMovement&&"true"==$(Nodes.canvasID).attr("data-loaded")?(d=s+this.ran(-7,7),l=a+this.ran(-7,7)):1==t&&1==Nodes.randomMovement&&"true"==$(Nodes.canvasID).attr("data-loaded")&&(d=Math.random()*window.innerWidth,l=Math.random()*window.innerHeight),this.imgsToDraw[e].colorAlpha){case"original":u=1;break;case"random":var u=Math.random()+.3;u>1&&(u=1)}switch(this.imgsToDraw[e].colorMapping){case"original":var p=n[o],w=n[o+1],v=n[o+2],f="rgba("+p+","+w+","+v+","+u+")";break;case"solid":hex=this.imgsToDraw[e].color.replace("#","");var p=parseInt(hex.substring(0,2),16),w=parseInt(hex.substring(2,4),16),v=parseInt(hex.substring(4,6),16),f="rgba("+p+","+w+","+v+","+u+")";break;case"random":var p=Math.floor(255*Math.random()),w=Math.floor(255*Math.random()),v=Math.floor(255*Math.random()),f="rgba("+p+","+w+","+v+","+u+")"}var N=Math.random()<.5,x=Math.random();jQuery.isArray(this.bgImage[e])?this.points[e][i].push({x:s,y:a,originalX:s,originalY:a,seqX:s,seqY:a,sequenceUsed:!1,toX:Math.random()*window.innerWidth,toY:Math.random()*window.innerHeight,color:f,baseRadius:Math.ceil(3*x),baseRadiusOriginal:Math.ceil(3*x),shrinking:!1,shrinkDelay:100*Math.random(),flashSize:N,randomNum:x}):(this.points[e].push({x:d,y:l,originalX:s,originalY:a,toX:Math.random()*window.innerWidth,toY:Math.random()*window.innerHeight,r:p,g:w,b:v,a:u,hiddenDuringTrans:!1,originalAlpha:u,color:"#ffffff",baseRadius:Math.ceil(x*this.imgsToDraw[e].maxParticleSize),baseRadiusOriginal:Math.ceil(x*this.imgsToDraw[e].maxParticleSize),randomPosX:6*Math.random(),randomPosY:6*Math.random(),shrinking:!1,shrinkDelay:100*Math.random(),flashSize:N,used:!1,duplicate:!1,randomNum:x}),this.points[e].baseRadius<1&&(this.points[e].baseRadius=1,this.points[e].baseRadiusOriginal=1))}}for(var b=0;b<this.points[e].length;b++){var M=Nodes.ran(0,this.points[e].length);if(window.innerWidth<690){var D=this.points[e].length>200?8:5;this.points[e].length>150&&M>Math.floor(this.points[e].length/D)&&(this.points[e][b].hiddenDuringTrans=!0)}else{if(this.points[e].length>800)var D=6;else if(this.points[e].length<=800&&this.points[e].length>600)var D=4.5;else if(this.points[e].length<=600&&this.points[e].length>400)var D=3.5;else if(this.points[e].length<=400)var D=1.5;this.points[e].length>350&&M>Math.floor(this.points[e].length/D)&&(this.points[e][b].hiddenDuringTrans=!0)}}e==Nodes.imgsToDraw.length-1&&(Nodes.draw(),0==t&&Nodes.particlesRotate(!1))},updatePoints:function(){var e,i,t,a,s,n;this.impulsX=this.impulsX-this.impulsX/30,this.impulsY=this.impulsY-this.impulsY/30;var o=this.points[Math.floor(this.currentShapeIndex)];for(1==this.onMobile?Nodes.decMultiplier<.23&&(Nodes.decMultiplier+=.0015):Nodes.decMultiplier<.125&&(Nodes.decMultiplier+=4e-4),e=0;e<o.length;e++){i=o[e],t=Math.atan2(i.y-this.mouse.y,i.x-this.mouse.x),a=60*this.reactionSensitivity/Math.sqrt((this.mouse.x-i.x)*(this.mouse.x-i.x)+(this.mouse.y-i.y)*(this.mouse.y-i.y)),a>50&&(a=0),o[e].time||(o[e].time=this.ran(70,200),o[e].deg=this.ran(-120,180),o[e].vel=this.ran(.08,.14));var h=(Nodes.randomMovement,o[e].vel);if(s=h*Math.cos(o[e].deg*Math.PI/180),n=h*Math.sin(o[e].deg*Math.PI/180),0!=Nodes.loaded&&(i.x+=s,i.y+=n),o[e].curve>0?o[e].deg=o[e].deg+2:o[e].deg=o[e].deg-2,o[e].time=o[e].time-1,0==Nodes.loaded)o[e].vel<.4||(o[e].vel=o[e].vel-0),i.x+=Math.cos(t)*a,i.y+=Math.sin(t)*a;else if(0==Nodes.randomMovement)0==Nodes.sequenceActive?(i.baseRadius=Math.ceil(i.randomNum*Nodes.imgsToDraw[Math.floor(this.currentShapeIndex)].maxParticleSize),i.baseRadiusOriginal=i.baseRadius,o[e].vel<.4?o[e].time=0:o[e].vel=o[e].vel-.008,i.x+=Math.cos(t)*a+(o[e].originalX-i.x)*Nodes.decMultiplier,i.y+=Math.sin(t)*a+(o[e].originalY-i.y)*Nodes.decMultiplier):void 0!==this.points[Math.floor(this.currentShapeIndex)][Nodes.currentSequenceIndex][e]&&(i.x+=Math.cos(t)*a+.08*(this.points[Math.floor(this.currentShapeIndex)][0][e].seqX-i.x),i.y+=Math.sin(t)*a+.08*(this.points[Math.floor(this.currentShapeIndex)][0][e].seqY-i.y));else{0==e&&this.reactionSensitivity<8&&(this.reactionSensitivity=8);var r=o[e].randomNum*i.baseRadius/4;r<.25&&(r=.25),o[e].time2||(o[e].time2=this.ran(300,900)),o[e].time2=o[e].time2-1,i.x+=Math.cos(t)*a+.027*(o[e].toX-i.x),i.y+=Math.sin(t)*a+.027*(o[e].toY-i.y),i.x<-.1*this.canvas.width&&(i.x=1.1*this.canvas.width,i.toX=1.1*this.canvas.width-4*this.ran(20,40)),i.x>1.1*this.canvas.width&&(i.x=-.1*this.canvas.width,i.toX=-.1*this.canvas.width+4*this.ran(20,40)),i.y<-.1*this.canvas.height&&(i.y=1.1*this.canvas.height,i.toY=1.1*this.canvas.height-4*this.ran(20,40)),i.y>1.1*this.canvas.height&&(i.y=-.1*this.canvas.height,i.toY=-.1*this.canvas.height+4*this.ran(20,40)),i.toX+=Math.floor(this.impulsX*r*30/30)+this.impulsX/7*i.randomPosX,i.toY+=Math.floor(this.impulsY*r*30/30)+this.impulsY/7*i.randomPosY,i.shrinkDelay>=0&&(i.shrinkDelay=i.shrinkDelay-.5),1==i.flashSize&&i.shrinkDelay<=0&&(i.baseRadius==i.baseRadiusOriginal&&0==i.shrinking&&(i.baseRadius=Nodes.imgsToDraw[Math.floor(this.currentShapeIndex)].maxParticleSize+4,i.alpha=1,i.color="rgba("+i.a+","+i.g+","+i.b+",1)",i.shrinking=!0),i.baseRadius=i.baseRadius-.3>1?i.baseRadius-.3:1,i.alpha=i.alpha>=i.originalAlpha&&1!=i.originalAlpha?i.alpha-.01:i.originalAlpha,i.color="rgba("+i.r+","+i.g+","+i.b+","+i.alpha+")",i.baseRadius<=i.baseRadiusOriginal&&1==i.shrinking&&(i.baseRadius=i.baseRadiusOriginal,i.flashSize=!1,i.shrinking=!1,i.shrinkDelay=100*Math.random(),i.color="rgba("+i.r+","+i.g+","+i.b+","+i.originalAlpha+")",o[Math.floor(Math.random()*o.length)].flashSize=!0))}}},drawPoints:function(){var e,i,t=this.points[Math.floor(this.currentShapeIndex)];for(e=0;e<t.length;e++){i=t[e];var a=t[e].randomNum;a<.1&&(a=.3),1==i.hiddenDuringTrans&&1==Nodes.randomMovement||(this.context.beginPath(),this.context.arc(i.x,i.y,i.baseRadius,0,2*Math.PI,!0),this.context.fillStyle=i.color,this.context.fill(),this.context.closePath())}},draw:function(){1==Nodes.regularAnimation||1==Nodes.randomMovement?(Nodes.animation=requestAnimationFrame(Nodes.draw),Nodes.now=Date.now(),Nodes.elapsed=Nodes.now-Nodes.then,Nodes.elapsed>16.666&&(Nodes.then=Nodes.now-Nodes.elapsed%16.666,0==$("#page-header-bg.out-of-sight").length&&(Nodes.clear(),Nodes.updatePoints(),Nodes.drawPoints()))):(Nodes.fpsDec+=.23,Nodes.fps=Nodes.fps>=0?Nodes.fps-Nodes.fpsDec:0,Nodes.decMultiplier=.14,setTimeout(function(){Nodes.animation=requestAnimationFrame(function(){Nodes.fps>0&&Nodes.draw()})},1e3/Nodes.fps),0==$("#page-header-bg.out-of-sight").length&&(Nodes.clear(),Nodes.updatePoints(),Nodes.drawPoints()))},clear:function(){this.context.clearRect(0,0,canvas.width,canvas.height)},ran:function(e,i){return Math.floor(Math.random()*(i-e+1))+e},loadData:function(e,i,t,a){1==a?("object"!=typeof this.bgImage[i]&&(this.bgImage[i]=[]),this.bgImage[i][t]=new Image,this.bgImage[i][t].src=e):(this.bgImage[i]=new Image,this.bgImage[i].src=e),jQuery.isArray(this.bgImage[i])?this.bgImage[i][t].onload=function(){Nodes.callDrawImageToBackground(i,t)}:this.bgImage[i].onload=function(){Nodes.callDrawImageToBackground(i,t)}},particlesRotate:function(e){initTimeOut=1==e?0:800,setTimeout(function(){var e=0==Nodes.loaded?Nodes.rotateTimer+1e3:Nodes.rotateTimer;Nodes.loaded=!0,setTimeout(function(){$(Nodes.canvasID).attr("data-loaded","true")},1e3),Nodes.imgsToDraw.length>1&&(Nodes.timeoutHolder=setTimeout(function(){Nodes.particleRotateLogic(!1)},e)),Nodes.canvasBgColor()},initTimeOut)},canvasBgColor:function(){},particleSequenceRotate:function(){setInterval(function(){for(var e,i,t,a,s,n=0;n<Nodes.points.length;n++)if(!jQuery.isArray(Nodes.points[n])&&"object"==typeof Nodes.points[n])for(j=0;j<1;j++)for(var o=0;o<Nodes.points[n][0].length;o++){e=Nodes.points[n][0][o],s=1e3,0,0;for(var h=0;h<Nodes.points[n][Nodes.currentSequenceIndex].length;h++)i=Nodes.points[n][Nodes.currentSequenceIndex][h],1!=i.sequenceUsed&&(a=Math.sqrt((i.originalX-e.x)*(i.originalX-e.x)+(i.originalY-e.y)*(i.originalY-e.y)),a<=s&&s>10&&(s=a,e.seqX=i.originalX,e.seqY=i.originalY,t=i),h==Nodes.points[n][Nodes.currentSequenceIndex].length-1&&(t.sequenceUsed=!0));if(o==Nodes.points[n][0].length-1)for(var h=0;h<Nodes.points[n][Nodes.currentSequenceIndex].length;h++)Nodes.points[n][Nodes.currentSequenceIndex][h].sequenceUsed=!1}Nodes.currentSequenceIndex=Nodes.currentSequenceIndex+1==Object.keys(Nodes.points[Nodes.currentShapeIndex]).length?0:Nodes.currentSequenceIndex+1},80)},callDrawImageToBackground:function(e,i){if(Nodes.loadedCount+=1,Nodes.loadedCount==Nodes.totalImgCount)for(var t=0;t<Nodes.imgsToDraw.length;t++)if(jQuery.isArray(this.bgImage[t]))for(j=0;j<Nodes.imgsToDraw[t].shape.length;j++)Nodes.drawImageToBackground(t,j,!1,!0);else Nodes.drawImageToBackground(t,null,!1,!0)},drawImageToBackground:function(e,i,t,a){shapeIndex=null==i?this.bgImage[e]:this.bgImage[e][i],this.bgCanvas=document.createElement("canvas"),this.bgCanvas.width=this.canvas.width,this.bgCanvas.height=this.canvas.height;var s,n,o=t,h=$("#full_screen.canvas-header .page").height()/1.3+50;if(this.bgCanvas.height<650&&(h/=2),shapeIndex.width>this.bgCanvas.width-50-h||shapeIndex.height>this.bgCanvas.height-50-h){var r=Math.max(shapeIndex.width/(this.bgCanvas.width-50),shapeIndex.height/(this.bgCanvas.height-100-h));s=shapeIndex.width/r,n=shapeIndex.height/r,this.bgCanvas.width<1600?r>3&&r<=4?(this.imgsToDraw[e].density=this.imgsToDraw[e].densityOriginal-3,this.imgsToDraw[e].maxParticleSize>=3&&(this.imgsToDraw[e].maxParticleSize=this.imgsToDraw[e].maxParticleSizeOriginal-1)):r>4?(this.bgCanvas.width>800?this.imgsToDraw[e].density=this.imgsToDraw[e].densityOriginal-4:this.imgsToDraw[e].density=this.imgsToDraw[e].densityOriginal-5,this.imgsToDraw[e].maxParticleSize>2&&(this.imgsToDraw[e].maxParticleSize=2)):r<=3&&(this.imgsToDraw[e].density=this.imgsToDraw[e].densityOriginal,this.imgsToDraw[e].maxParticleSize=this.imgsToDraw[e].maxParticleSizeOriginal):(this.imgsToDraw[e].density=this.imgsToDraw[e].densityOriginal,this.imgsToDraw[e].maxParticleSize=this.imgsToDraw[e].maxParticleSizeOriginal)}else $(window).width()>1024&&(s=shapeIndex.width,n=shapeIndex.height),$(window).width()<=1024&&(s=99,n=247),$(window).width()<=550&&(s=74,n=183);this.bgContext=this.bgCanvas.getContext("2d"),this.bgContext.drawImage(shapeIndex,(this.canvas.width-s)/2,(this.canvas.height+0-n-1*h)/2.8,s,n),this.bgContextPixelData=this.bgContext.getImageData(0,0,this.bgCanvas.width,this.bgCanvas.height),this.preparePoints(e,i,o)},onWindowResize:function(){if(cancelAnimationFrame(this.animation),Nodes.loadedCount==Nodes.imgsToDraw.length)for(var e=0;e<Nodes.imgsToDraw.length;e++)this.drawImageToBackground(e,null,!0,!1);this.onMobile=this.canvas.width<=690}};Nodes.init("#canvas");